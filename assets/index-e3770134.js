var O=Object.defineProperty;var L=(l,e,s)=>e in l?O(l,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[e]=s;var o=(l,e,s)=>(L(l,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const t of r.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&n(t)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();function T(l,e,s){return{xPosition:Math.random()*e,yPosition:Math.random()*s,xVelocity:0,yVelocity:0,color:l}}function f(l,e,s,n,i){const r=[];for(let t=0;t<l;t++){const m=T(n,e,s);r.push(m)}return{color:n,atoms:r,rules:i}}class _{constructor(e=5,s,n,i,r,t,m){o(this,"targetFrameRate");o(this,"totalFramesRendered");o(this,"averageFrameRate");o(this,"isPlaying");o(this,"time");o(this,"lastFrame");o(this,"frame");o(this,"delay");o(this,"timerReference");o(this,"canvasContext");o(this,"width");o(this,"height");o(this,"atomsArray");o(this,"atomGroups");o(this,"atomSize");this.targetFrameRate=e,this.totalFramesRendered=0,this.averageFrameRate=0,this.isPlaying=!1,this.time=null,this.lastFrame=-1,this.frame=0,this.delay=1e3/e,this.timerReference=null,this.canvasContext=s,this.width=r,this.height=t,this.atomsArray=n,this.atomGroups=i,this.atomSize=m}changeFrameRate(e){this.targetFrameRate=e,this.delay=1e3/e,this.lastFrame=-1,this.frame=0,this.totalFramesRendered=0,this.averageFrameRate=0,this.time=null}start(){this.isPlaying||(this.isPlaying=!0,this.timerReference=requestAnimationFrame(e=>{this.updateScreen(e)}))}pause(){this.isPlaying&&(cancelAnimationFrame(this.timerReference),this.isPlaying=!1,this.time=null,this.lastFrame=-1)}renderAtom(e){this.canvasContext.beginPath(),this.canvasContext.arc(e.xPosition,e.yPosition,this.atomSize/2,0,2*Math.PI,!1),this.canvasContext.fillStyle=e.color,this.canvasContext.fill()}updateScreen(e){this.time||(this.time=e);const s=e-this.time;if(this.frame=Math.floor(s/this.delay),this.frame>this.lastFrame){this.totalFramesRendered++,this.averageFrameRate=this.totalFramesRendered/(s/1e3),console.log(this.averageFrameRate),this.lastFrame=this.frame,this.canvasContext.clearRect(0,0,this.width,this.height);for(const n of this.atomsArray)this.renderAtom(n)}this.timerReference=requestAnimationFrame(n=>{this.updateScreen(n)})}}class b{constructor(e,s,n,i,r,t,m){o(this,"allAtomGroups");o(this,"width");o(this,"height");o(this,"atomEffectRadius");o(this,"velocityBrake");o(this,"gravityForce");o(this,"updatesPerSecond");o(this,"intervalTimerReference");o(this,"nextActionDelay");console.log(s,n),this.allAtomGroups=e,this.width=s,this.height=n,this.atomEffectRadius=i,this.velocityBrake=r,this.gravityForce=t,this.updatesPerSecond=m,this.intervalTimerReference=null,this.nextActionDelay=1e3/m}start(){this.intervalTimerReference=setInterval(()=>{this.updateAtomTargetPositions()},this.nextActionDelay)}updateAtomTargetPositions(){const e=this.width/2,s=this.height/2;for(const n of this.allAtomGroups)for(const i of this.allAtomGroups){const r=n.rules[i.color];for(const t of n.atoms){let m=0,R=0,A=0,v=0;for(const F of i.atoms){const u=t.xPosition-F.xPosition,g=t.yPosition-F.yPosition,C=t.xPosition-e,G=t.yPosition-s,p=Math.sqrt(u*u+g*g);if(p&&p<this.atomEffectRadius){const P=r*(1/p);m-=P*u,R-=P*g}A-=this.gravityForce*C,v-=this.gravityForce*G}t.xVelocity=(t.xVelocity+m+A)*this.velocityBrake,t.yVelocity=(t.yVelocity+R+v)*this.velocityBrake,t.xPosition<0&&t.xVelocity<0&&(t.xVelocity*=-1),t.xPosition>this.width&&t.xVelocity>0&&(t.xVelocity*=-1),t.yPosition<0&&t.xVelocity<0&&(t.yVelocity*=-1),t.yPosition>this.height&&t.yVelocity>0&&(t.yVelocity*=-1),t.xPosition+=t.xVelocity,t.yPosition+=t.yVelocity}}}}function a(){return Math.random()*2-1}let c=window.innerWidth-300,h=window.innerHeight-80,M=25,D=30;const y=600,I=5,B=2e-5,N=300,U=.05,Y={yellow:a(),red:a(),green:a(),blue:a()},H={yellow:a(),red:a(),green:a(),blue:a()},W={yellow:a(),red:a(),green:a(),blue:a()},X={yellow:a(),red:a(),green:a(),blue:a()},d=document.getElementById("canvas");d.width=c;d.height=h;console.log(c,h);const q=d.getContext("2d");window.addEventListener("resize",()=>{c=window.innerWidth-300,h=window.innerHeight-80,d.width=c,d.height=h});const x=f(y,c,h,"yellow",Y),E=f(y,c,h,"red",H),w=f(y,c,h,"green",W),S=f(y,c,h,"blue",X),V=[x,E,w,S],z=[...x.atoms,...E.atoms,...w.atoms,...S.atoms],K=new b(V,c,h,N,U,B,M),Z=new _(D,q,z,V,c,h,I);K.start();Z.start();
