var C=Object.defineProperty;var S=(l,t,o)=>t in l?C(l,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[t]=o;var i=(l,t,o)=>(S(l,typeof t!="symbol"?t+"":t,o),o);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const e of r.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&n(e)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}})();class T{constructor(t,o,n,s,r=24,e=5){i(this,"targetFrameRate");i(this,"totalFramesRendered");i(this,"averageFrameRate");i(this,"isPlaying");i(this,"time");i(this,"lastFrame");i(this,"frame");i(this,"delay");i(this,"timerReference");i(this,"canvasContext");i(this,"width");i(this,"height");i(this,"atomsArray");i(this,"atomSize");this.targetFrameRate=r,this.totalFramesRendered=0,this.averageFrameRate=0,this.isPlaying=!1,this.time=null,this.lastFrame=-1,this.frame=0,this.delay=1e3/r,this.timerReference=null,this.canvasContext=t,this.width=n,this.height=s,this.atomsArray=o,this.atomSize=e}changeFrameRate(t){this.targetFrameRate=t,this.delay=1e3/t,this.lastFrame=-1,this.frame=0,this.totalFramesRendered=0,this.averageFrameRate=0,this.time=null}updateDimensions(t,o){this.width=t,this.height=o}start(){this.isPlaying||(this.isPlaying=!0,this.timerReference=requestAnimationFrame(t=>{this.updateScreen(t)}))}stop(){this.isPlaying&&(cancelAnimationFrame(this.timerReference),this.isPlaying=!1,this.lastFrame=-1,this.frame=0,this.totalFramesRendered=0,this.averageFrameRate=0,this.time=null)}reset(){}renderAtom(t){this.canvasContext.beginPath(),this.canvasContext.arc(t.xPosition,t.yPosition,this.atomSize/2,0,2*Math.PI,!1),this.canvasContext.fillStyle=t.color,this.canvasContext.fill()}updateScreen(t){this.time||(this.time=t);const o=t-this.time;if(this.frame=Math.floor(o/this.delay),this.frame>this.lastFrame){this.totalFramesRendered++,this.averageFrameRate=this.totalFramesRendered/(o/1e3),this.lastFrame=this.frame,this.canvasContext.clearRect(0,0,this.width,this.height);for(const n of this.atomsArray)this.renderAtom(n)}this.timerReference=requestAnimationFrame(n=>{this.updateScreen(n)})}}function D(l,t,o){return{xPosition:Math.random()*t,yPosition:Math.random()*o,xVelocity:0,yVelocity:0,color:l}}function f(l,t,o,n,s){const r=[];for(let e=0;e<l;e++){const c=D(n,t,o);r.push(c)}return{color:n,atoms:r,rules:s}}class O{constructor(t,o,n=500,s=300,r=.3,e=2e-5,c=5){i(this,"yellowAtomGroup");i(this,"redAtomGroup");i(this,"greenAtomGroup");i(this,"blueAtomGroup");i(this,"allAtomGroups");i(this,"width");i(this,"height");i(this,"numberOfAtoms");i(this,"atomEffectRadius");i(this,"velocityBrake");i(this,"gravityForce");i(this,"updatesPerSecond");i(this,"intervalTimerReference");i(this,"nextActionDelay");this.yellowAtomGroup=f(n,t,o,"yellow",{yellow:a(),red:a(),green:a(),blue:a()}),this.redAtomGroup=f(n,t,o,"red",{yellow:a(),red:a(),green:a(),blue:a()}),this.greenAtomGroup=f(n,t,o,"green",{yellow:a(),red:a(),green:a(),blue:a()}),this.blueAtomGroup=f(n,t,o,"blue",{yellow:a(),red:a(),green:a(),blue:a()}),this.allAtomGroups=[this.yellowAtomGroup,this.redAtomGroup,this.greenAtomGroup,this.blueAtomGroup],this.width=t,this.height=o,this.numberOfAtoms=n,this.atomEffectRadius=s,this.velocityBrake=r,this.gravityForce=e,this.updatesPerSecond=c,this.intervalTimerReference=null,this.nextActionDelay=1e3/c}getAtoms(){return[...this.yellowAtomGroup.atoms,...this.redAtomGroup.atoms,...this.greenAtomGroup.atoms,...this.blueAtomGroup.atoms]}updateDimensions(t,o){this.width=t,this.height=o}start(){this.intervalTimerReference||(this.intervalTimerReference=setInterval(()=>{this.updateAtomTargetPositions()},this.nextActionDelay))}stop(){this.intervalTimerReference&&clearInterval(this.intervalTimerReference),this.intervalTimerReference=null}updateAtomTargetPositions(){const t=this.width/2,o=this.height/2;for(const n of this.allAtomGroups)for(const s of this.allAtomGroups){const r=n.rules[s.color];for(const e of n.atoms){let c=0,F=0,R=0,w=0;for(const x of s.atoms){const p=e.xPosition-x.xPosition,g=e.yPosition-x.yPosition,b=e.xPosition-t,V=e.yPosition-o,A=Math.sqrt(p*p+g*g);if(A&&A<this.atomEffectRadius){const G=r*(1/A);c-=G*p,F-=G*g}R-=this.gravityForce*b,w-=this.gravityForce*V}e.xVelocity=(e.xVelocity+c+R)*this.velocityBrake,e.yVelocity=(e.yVelocity+F+w)*this.velocityBrake,e.xPosition<0&&e.xVelocity<0&&(e.xVelocity*=-1),e.xPosition>this.width&&e.xVelocity>0&&(e.xVelocity*=-1),e.yPosition<0&&e.yVelocity<0&&(e.yVelocity*=-1),e.yPosition>this.height&&e.yVelocity>0&&(e.yVelocity*=-1),e.xPosition+=e.xVelocity,e.yPosition+=e.yVelocity}}}}function a(){return Math.random()*2-1}let h=window.innerWidth-300,m=window.innerHeight-80;const d=document.getElementById("canvas");d.width=h;d.height=m;const E=d.getContext("2d"),v=document.querySelector("[data-start-button]"),P=document.querySelector("[data-stop-button]");window.addEventListener("resize",()=>{h=window.innerWidth-300,m=window.innerHeight-80,d.width=h,d.height=m,y.updateDimensions(h,m),u.updateDimensions(h,m)});v.onclick=()=>{u.isPlaying||(y.start(),u.start(),v.disabled=!0,P.disabled=!1)};P.onclick=()=>{u.isPlaying&&(y.stop(),u.stop(),v.disabled=!1,P.disabled=!0)};const y=new O(h,m),u=new T(E,y.getAtoms(),h,m);
